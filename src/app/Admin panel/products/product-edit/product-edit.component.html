<p-toast
  position="top-right"
  styleClass="mt-2"
  [breakpoints]="{ '920px': { width: '100%', right: '0', left: '0' } }"
  [baseZIndex]="9999"
></p-toast>
<p-confirmDialog [style]="{ width: '50vw' }"></p-confirmDialog>
<div class="card">
  <h6 class="card-header"><strong>Edit Product</strong></h6>
  <div class="card-body">
    <form #P="ngForm"> 
       <div class="mt-3 text-md-start text-center d-sm-flex">
        <img [src]="url" class="d-block pic" alt="" />
        <br />
         <input
          type="file"
          id="file"
          pt="image/*"
          class="mt-4 ml-4"
          class="file"
          (change)="onfileselected($event)"
          required
        /> 
        <label for="file" type="button" class="style p-2 ml-3 mt-4"
          >Upload pic</label
        >
      </div>
      <span class="help-block" *ngIf="filenotify">Please upload the pic</span>
      <br /> 

       <div class="row">
        <div class="col">
          <label class="font-weight-bold">Select Category <span class="text-danger">*</span></label>
          <br />
          <p-dropdown
            [options]="Allcat"
            ngModel
            name="Category"
            [(ngModel)]="selectedCat"
            styleClass="w-100 height"
            optionLabel="Name"
            [showClear]="true"
            (onChange)="onchangeCat()"
            required
          ></p-dropdown>
        </div>
        <div class="col">
          <label class="font-weight-bold">Select SubCategory <span class="text-danger">*</span></label>
          <br />
          <p-dropdown
            [tabindex]="9999999"
            [options]="testsubcategory"
            ngModel
            name="subCategory"
            [(ngModel)]="selectedSubCat"
            styleClass="w-100 height"
            optionLabel="Name"
            [showClear]="true"
            required
          ></p-dropdown>
        </div>
      </div>
      <br />

      <div class="row">
        <div class="col">
          <label class="font-weight-bold">Product Name <span class="text-danger">*</span></label>
          <input
            type="text"
            class="form-control"
            placeholder="Enter Product name"
            [(ngModel)]="Product.Name"
            name="Name"
            #prdname="ngModel"
            required
          />
          <span class="help-block" *ngIf="!prdname.valid && prdname.touched"
            >Please enter product name</span
          >
        </div>
        <div class="col">
          <label class="font-weight-bold">Retail Price <span class="text-danger">*</span></label>
          <input
            type="text"
            class="form-control"
            placeholder="Enter Retail price"
            [(ngModel)]="Product.RetailPrice"
            name="RetailPrice"
            #Retail="ngModel"
            required
          />
          <span class="help-block" *ngIf="!Retail.valid && Retail.touched"
            >Please enter Retail Price</span
          >
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col">
          <label class="font-weight-bold">Purchase Price <span class="text-danger">*</span></label>
          <input
            type="text"
            class="form-control"
            placeholder="Enter Purchase price"
            [(ngModel)]="Product.PurchasePrice"
            name="PurchasePrice"
            #Purchase="ngModel"
            required
          />
          <span class="help-block" *ngIf="!Purchase.valid && Purchase.touched"
            >Please enter Purchase Price</span
          >
        </div>

        <div class="col">
          <label class="font-weight-bold">Quantity <span class="text-danger">*</span></label>
          <br>
          <p-inputNumber  [(ngModel)]="Product.Quantity" inputStyleClass="form-control" styleClass="w-100" [min]="1" [showButtons]="true" name="Quantity" #Qty="ngModel" required></p-inputNumber>
          <span class="help-block" *ngIf="!Qty.valid && Qty.touched"
            >Please enter Quantity</span
          >
        </div>
      </div>
      <br />

      <div class="row">
        <div class="col">
        <label class="font-weight-bold">Instock <span class="text-danger"></span></label>
        <br/>
        <p-inputSwitch  (onChange)="handleChange($event)" name="InStock"  [(ngModel)]="Product.InStock"></p-inputSwitch>
        </div>
      </div>
      <div class="d-flex justify-content-center">
        <br/>
        <button class="btn btn-primary" type="submit" (click)="confirmUpdateProduct(P)" [disabled]="!P.valid">
          Update Product
        </button>
      </div> 
    </form>
  </div>
</div> 
